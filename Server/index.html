<!DOCTYPE html>

<head>
    <meta charset="UTF_8" />
    <title>Sample hosted HTML</title>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript">
        let UserName = "FB1";
        let message = null;

        function Send() {
            let time = 30;
            let tmp = { name: UserName, time: time, text: message };
            tmp = JSON.stringify(tmp);
            fetch("/", { method: 'POST', body: tmp });
        };

        async function Get() {
            let data = await fetch("/Update", { method: 'GET' }).then(res => { return res.text() });
            data = data.split('\n');
            let tmp = "";
            data.forEach(function (val) { tmp += val + "<br>" });
            TextField.innerHTML = tmp;
        };

        function GetInit() {
            var Timer = setInterval(Get, 666);
        }

        function update_name() {
            UserName = Name.value;
        }
        function update_msg() {
            message = Msg.value;
        }
    </script>
</head>

<body onload="GetInit();">
    <div>
        <button id="SendButton" onclick="Send();"> Send Message </button><br>
        <button id="GetButton" onclick="Get();"> Get messages </button><br>
        <label for="input_year"> UserName </label> <input type="text" id="Name" onkeyup="update_name()"><br>
        <label for="input_month"> Message </label> <input type="text" id="Msg" onkeyup="update_msg()"><br>
        <span id="TextField"> No messages were loaded </span>
    </div>
</body>

</html>